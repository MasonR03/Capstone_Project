
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Space Arena (Skeleton)</title>
    <style>
      html, body { margin:0; padding:0; background:#0b0f1a; color:#dbe4ff; font-family: system-ui, Arial; }
      #hud { position: fixed; top: 8px; left: 8px; font-size: 14px; background: rgba(0,0,0,0.4); padding: 8px 10px; border-radius: 6px; }
      canvas { display:block; margin:0 auto; outline:1px solid #1f2a44; }
      .tag { opacity:.8 }
    </style>
  </head>
  <body>
    <div id="hud">
      <div><strong>Space Arena — Skeleton</strong></div>
      <div class="tag">W/↑ thrust • A/D/←/→ turn</div>
      <div id="net"></div>
    </div>
    <canvas id="c" width="800" height="600"></canvas>

    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script type="module">
      import { Net } from "./js/net.js";
      import { startRender } from "./js/render.js";

      const canvas = document.getElementById("c");
      const hudNet = document.getElementById("net");
      const net = new Net();

      // Input handling
      const keys = {};
      addEventListener("keydown", (e) => keys[e.key] = true);
      addEventListener("keyup",   (e) => keys[e.key] = false);

      setInterval(() => {
        net.sendInput({
          thrust: keys["w"] || keys["ArrowUp"] || false,
          turn: (keys["a"] || keys["ArrowLeft"] ? -1 : 0) + (keys["d"] || keys["ArrowRight"] ? 1 : 0),
          clientTime: performance.now(),
        });
      }, 50); // 20 Hz

      startRender(canvas, net, hudNet);
    </script>
  </body>
</html>
